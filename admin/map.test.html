<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>주소 검색 및 마커 표시</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
    <style>
        #map { width: 100%; height: 500px; }
    </style>
</head>
<body>
    <input type="text" id="address" placeholder="주소를 입력하세요">
    <button onclick="searchAddress()">검색</button>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
    <script>
        // 지도 초기화
        var map = L.map('map').setView([37.5665, 126.9780], 13); // 초기 중심 좌표 (서울 시청)

        // OSM 타일 레이어 추가
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // 주소 검색 함수
        function searchAddress() {
            var address = document.getElementById('address').value;
            if (!address) {
                alert('주소를 입력하세요.');
                return;
            }

            // Nominatim API를 통한 주소 검색
            var url = 'https://nominatim.openstreetmap.org/search?format=json&q=' + encodeURIComponent(address);
            fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.length > 0) {
                        var place = data[0];
                        var lat = parseFloat(place.lat);
                        var lon = parseFloat(place.lon);

                        // 지도 중심 이동
                        map.setView([lat, lon], 16);

                        // 마커 추가
                        L.marker([lat, lon]).addTo(map)
                            .bindPopup(place.display_name)
                            .openPopup();
                    } else {
                        alert('주소를 찾을 수 없습니다.');
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('주소 검색 중 오류가 발생했습니다.');
                });
        }
    </script>
</body>
</html>
